<!DOCTYPE html>
<html>

<head>
    <title>Employees</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container mt-5">


        <h2>All Employees</h2>

        <form method="get" class="row g-3 mb-4">
            <div class="col-auto">
                <select name="department" class="form-control">
                    <option value="">All Departments</option>
                    {% for dept in departments %}
                    <option value="{{ dept.id }}">{{ dept.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-auto">
                <select name="status" class="form-control">
                    <option value="">All Statuses</option>
                    <option value="onboarded">Onboarded</option>
                    <option value="offboarded">Offboarded</option>
                </select>
            </div>
            <div class="col-auto">
                <button class="btn btn-primary">Filter</button>
            </div>
        </form>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Joining</th>
                    <th>Exit</th>
                    <th>Department</th>
                    <th>Status</th>
                    <th>Actions</th>
                    <th>Updates</th>
                </tr>
            </thead>
            <tbody>
                {% for emp in employees %}
                <tr>
                    <td>{{ emp.name }}</td>
                    <td>{{ emp.email }}</td>
                    <td>{{ emp.date_of_joining }}</td>
                    <td>{{ emp.date_of_exit|default:"-" }}</td>
                    <td>{{ emp.department.name }}</td>
                    <td>{{ emp.status|capfirst }}</td>
                    <td>
                        {% if emp.status == 'onboarded' %}
                        <a href="{% url 'offboard_employee' emp.id %}" class="btn btn-sm btn-warning">Offboard</a>

                        {% else %}
                        <a href="{% url 'onboard_employee' emp.id %}" class="btn btn-sm btn-success">Onboard</a>
                        <!-- <span class="text-muted">N/A</span> -->
                        {% endif %}

                    </td>
                    <td>
                        <a href="{% url 'edit_employee' emp.id %}" class="btn btn-sm btn-primary">Edit</a>
                        <a href="{% url 'delete_employee' emp.id %}" class="btn btn-sm btn-danger"
                            onclick="return confirm('Are you sure you want to delete this employee?');">Delete</a>
                    </td>


                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No employees found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <a href="{% url 'dashboard' %}" class="btn btn-secondary">Back</a>
    </div>
</body>

</html>